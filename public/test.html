<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>API Tests</title>
</head>
<body>
  <h1>API Tests</h1>
  <div id="test-results"></div>
  <button onclick="runTests()">Run Tests</button>

  <script>
    async function runTests() {
      const response = await fetch('/run-tests');
      const resultsDiv = document.getElementById('test-results');
      if (!response.ok) {
        const errorText = await response.json();
        resultsDiv.innerText = `Error running tests: ${errorText.error}`;
        return;
      }
      const results = await response.json();
      displayResults(results);
    }

    function displayResults(results) {
      const resultsDiv = document.getElementById('test-results');
      resultsDiv.innerHTML = '';

      results.testResults.forEach(testSuite => {
        const suiteDiv = document.createElement('div');
        suiteDiv.innerHTML = `<h2>${testSuite.name}</h2>`;
        testSuite.assertionResults.forEach(test => {
          const testDiv = document.createElement('div');
          testDiv.innerHTML = `<p>${test.status}: ${test.title}</p>`;
          suiteDiv.appendChild(testDiv);
        });
        resultsDiv.appendChild(suiteDiv);
      });
    }
  </script>
</body>
</html>
